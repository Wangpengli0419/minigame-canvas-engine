(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{355:function(t,a,s){"use strict";s.r(a);var e=s(43),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h2",{attrs:{id:"layout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout"}},[t._v("#")]),t._v(" Layout")]),t._v(" "),s("h3",{attrs:{id:"getelementsbyid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getelementsbyid"}},[t._v("#")]),t._v(" getElementsById")]),t._v(" "),s("h4",{attrs:{id:"layout-getelementsbyid-string-elementid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-getelementsbyid-string-elementid"}},[t._v("#")]),t._v(" Layout.getElementsById(String elementId)")]),t._v(" "),s("p",[t._v("获取元素id为"),s("strong",[t._v("elementId")]),t._v("的一组元素")]),t._v(" "),s("h3",{attrs:{id:"getelementsbyclassname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getelementsbyclassname"}},[t._v("#")]),t._v(" getElementsByClassName")]),t._v(" "),s("h4",{attrs:{id:"layout-getelementsbyclassname-string-classname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-getelementsbyclassname-string-classname"}},[t._v("#")]),t._v(" Layout.getElementsByClassName(String className)")]),t._v(" "),s("p",[t._v("获取包含class为"),s("strong",[t._v("className")]),t._v("的一组元素")]),t._v(" "),s("h3",{attrs:{id:"updateviewport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updateviewport"}},[t._v("#")]),t._v(" updateViewPort")]),t._v(" "),s("h4",{attrs:{id:"layout-updateviewport-object-box"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-updateviewport-object-box"}},[t._v("#")]),t._v(" Layout.updateViewPort(Object box)")]),t._v(" "),s("p",[t._v("更新被绘制canvas的窗口信息，本渲染引擎并不关心是否会和其他游戏引擎共同使用，而本身又需要支持事件处理，因此，如果被渲染内容是绘制到离屏canvas，需要将最终绘制在屏幕上\n的绝对尺寸和位置信息更新到本渲染引擎。")]),t._v(" "),s("h5",{attrs:{id:"box"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#box"}},[t._v("#")]),t._v(" box")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("key")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("是否必填")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("width")]),t._v(" "),s("td",[t._v("Number")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("canvas的物理像素宽度")])]),t._v(" "),s("tr",[s("td",[t._v("heigth")]),t._v(" "),s("td",[t._v("Number")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("canvas的物理像素高度")])]),t._v(" "),s("tr",[s("td",[t._v("x")]),t._v(" "),s("td",[t._v("Number")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("canvas 距离屏幕左上角的物理像素x坐标")])]),t._v(" "),s("tr",[s("td",[t._v("y")]),t._v(" "),s("td",[t._v("Number")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("canvas 距离屏幕左上角的物理像素y坐标")])])])]),t._v(" "),s("h4",{attrs:{id:"layout-getelementsbyclassname-string-classname-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-getelementsbyclassname-string-classname-2"}},[t._v("#")]),t._v(" Layout.getElementsByClassName(String className)")]),t._v(" "),s("p",[t._v("获取包含class为"),s("strong",[t._v("className")]),t._v("的一组元素")]),t._v(" "),s("h3",{attrs:{id:"repaint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repaint"}},[t._v("#")]),t._v(" repaint")]),t._v(" "),s("h4",{attrs:{id:"layout-repaint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-repaint"}},[t._v("#")]),t._v(" Layout.repaint()")]),t._v(" "),s("p",[t._v("在某些场景下执行重渲染逻辑，比如通过getElementsById获取一个元素并且改变他的背景颜色，因为不涉及布局变更，执行Layout.reapint()即可。")]),t._v(" "),s("h3",{attrs:{id:"clear"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clear"}},[t._v("#")]),t._v(" clear")]),t._v(" "),s("h4",{attrs:{id:"layout-clear"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-clear"}},[t._v("#")]),t._v(" Layout.clear()")]),t._v(" "),s("p",[t._v("清理画布，之前的计算出来的渲染树也会一并清理，此时可以再次执行init和layout方法渲染界面。")]),t._v(" "),s("h3",{attrs:{id:"clearpool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clearpool"}},[t._v("#")]),t._v(" clearPool")]),t._v(" "),s("h4",{attrs:{id:"layout-clearpool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-clearpool"}},[t._v("#")]),t._v(" Layout.clearPool()")]),t._v(" "),s("p",[t._v("调用此API可以清理对象池，释放内存")]),t._v(" "),s("h3",{attrs:{id:"clearall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clearall"}},[t._v("#")]),t._v(" clearAll")]),t._v(" "),s("h4",{attrs:{id:"layout-clearall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-clearall"}},[t._v("#")]),t._v(" Layout.clearAll()")]),t._v(" "),s("p",[t._v("等价于按序调用Layout.clear和Layout.clearPool.")]),t._v(" "),s("h3",{attrs:{id:"loadimgs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loadimgs"}},[t._v("#")]),t._v(" loadImgs")]),t._v(" "),s("h4",{attrs:{id:"layout-loadimgs-array-imgarr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-loadimgs-array-imgarr"}},[t._v("#")]),t._v(" Layout.loadImgs(Array imgarr)")]),t._v(" "),s("p",[t._v("对于图片资源，如果不提前加载，渲染过程中可能出现挨个出现图片效果，影响体验。通过Layout.loadImgs可以预加载图片资源，在调用Layout.layout的时候渲染性能更好，体验更佳。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 注意图片路径不需要加./作为前缀，以小游戏根目录作为根目录\nLayout.loadImgs([\n    'sub/Buffet_icon_GiftPlate_0.png',\n    'sub/Buffet_icon_GiftPlate.png',\n    'sub/UI_Icon_Rating.png',\n]);\n\n")])])]),s("h3",{attrs:{id:"registbitmapfont"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registbitmapfont"}},[t._v("#")]),t._v(" registBitMapFont")]),t._v(" "),s("h4",{attrs:{id:"layout-registbitmapfont-name-src-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout-registbitmapfont-name-src-config"}},[t._v("#")]),t._v(" Layout.registBitMapFont(name, src, config)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("keyName")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("name")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("字体的名称")])]),t._v(" "),s("tr",[s("td",[t._v("src")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("bitMapFont字体的图片链接")])]),t._v(" "),s("tr",[s("td",[t._v("config")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("BitMapFont的配置信息")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registBitMapFont")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fnt_number-export'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://res.wx.qq.com/wechatgame/product/webpack/userupload/20200314/fnt_number-export.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('info face="fnt_number-export" size=50 bold=0 italic=0 charset="" unicode=0 stretchH=100 smooth=1 aa=1 padding=0,0,0,0 spacing=1,1\ncommon lineHeight=60 base=26 scaleW=190 scaleH=181 pages=1 packed=0 alphaChnl=1 redChnl=0 greenChnl=0 blueChnl=0\npage id=0 file="fnt_number-export.png"\nchars count=15\nchar id=31561 x=0 y=61 width=60 height=61 xoffset=0 yoffset=2 xadvance=57 page=0 chnl=0 letter="等"\nchar id=32423 x=0 y=0 width=62 height=60 xoffset=0 yoffset=2 xadvance=59 page=0 chnl=0 letter="级"\nchar id=46 x=168 y=116 width=21 height=21 xoffset=0 yoffset=39 xadvance=18 page=0 chnl=0 letter="."\nchar id=49 x=145 y=0 width=27 height=57 xoffset=0 yoffset=3 xadvance=24 page=0 chnl=0 letter="1"\nchar id=50 x=44 y=123 width=41 height=57 xoffset=0 yoffset=3 xadvance=38 page=0 chnl=0 letter="2"\nchar id=51 x=102 y=58 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="3"\nchar id=52 x=143 y=58 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="4"\nchar id=53 x=0 y=123 width=43 height=57 xoffset=0 yoffset=3 xadvance=40 page=0 chnl=0 letter="5"\nchar id=54 x=127 y=116 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="6"\nchar id=55 x=86 y=119 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="7"\nchar id=56 x=63 y=0 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="8"\nchar id=57 x=104 y=0 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="9"\nchar id=48 x=61 y=61 width=40 height=57 xoffset=0 yoffset=3 xadvance=37 page=0 chnl=0 letter="0"\nchar id=32 x=0 y=0 width=0 height=0 xoffset=0 yoffset=0 xadvance=0 page=0 chnl=0 letter=" "\nchar id=9 x=0 y=0 width=0 height=0 xoffset=0 yoffset=0 xadvance=0 page=0 chnl=0 letter="\t"\n\nkernings count=0')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"事件api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件api"}},[t._v("#")]),t._v(" 事件API")]),t._v(" "),s("p",[t._v("通过getElementsById或者getElementsByClassName获取元素之后，可以的绑定事件，支持的事件有"),s("code",[t._v("touchstart")]),t._v("、"),s("code",[t._v("touchmove")]),t._v("、"),s("code",[t._v("touchend")]),t._v("、"),s("code",[t._v("touchcancel")]),t._v("、"),s("code",[t._v("click")]),t._v(",示例如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'listItem'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nlist"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchstart'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"属性api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性api"}},[t._v("#")]),t._v(" 属性API")]),t._v(" "),s("p",[t._v("通过Layout.getElementsById和Layout.getElementsByClassName获取image和text之后，修改图片的链接或者文本的值会自动重渲染界面。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" img "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'testimgid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newimgsrc'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tesettextid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newtextvalue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);